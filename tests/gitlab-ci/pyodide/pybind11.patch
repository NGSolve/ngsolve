diff --git a/include/pybind11/detail/common.h b/include/pybind11/detail/common.h
index 314dba40..c7cc063f 100644
--- a/include/pybind11/detail/common.h
+++ b/include/pybind11/detail/common.h
@@ -137,7 +137,7 @@
 #    if defined(WIN32) || defined(_WIN32)
 #        define PYBIND11_EXPORT __declspec(dllexport)
 #    else
-#        define PYBIND11_EXPORT __attribute__((visibility("default")))
+#        define PYBIND11_EXPORT __attribute__((visibility("default"))) __attribute__((used))
 #    endif
 #endif
 
diff --git a/tools/pybind11Common.cmake b/tools/pybind11Common.cmake
index 1c1d4f88..87864d5f 100644
--- a/tools/pybind11Common.cmake
+++ b/tools/pybind11Common.cmake
@@ -88,11 +88,11 @@ if(CMAKE_SYSTEM_NAME MATCHES Emscripten AND NOT _pybind11_no_exceptions)
   set_property(
     TARGET ${_tmp_config_target}
     APPEND
-    PROPERTY INTERFACE_LINK_OPTIONS -fexceptions)
+    PROPERTY INTERFACE_LINK_OPTIONS -fwasm-exceptions)
   set_property(
     TARGET ${_tmp_config_target}
     APPEND
-    PROPERTY INTERFACE_COMPILE_OPTIONS -fexceptions)
+    PROPERTY INTERFACE_COMPILE_OPTIONS -fwasm-exceptions)
   unset(_tmp_config_target)
 endif()
 
